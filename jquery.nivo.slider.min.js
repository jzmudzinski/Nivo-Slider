(function(a){a.fn.nivoSlider=function(n){function l(d,c,b,j){var e=d.data("nivo:vars");if((!e||e.stop)&&!j)return false;b.beforeChange.call(this);if(j){j=="prev"&&d.css("background","url("+e.currentImage.attr("src")+") no-repeat");j=="next"&&d.css("background","url("+e.currentImage.attr("src")+") no-repeat")}else d.css("background","url("+e.currentImage.attr("src")+") no-repeat");e.currentSlide++;if(e.currentSlide==e.totalSlides){e.currentSlide=0;b.slideshowEnd.call(this)}if(e.currentSlide<0)e.currentSlide=
e.totalSlides-1;e.currentImage=a(c[e.currentSlide]).is("img")?a(c[e.currentSlide]):a(c[e.currentSlide]).find("img:first");if(b.controlNav){a(".nivo-controlNav a",d).removeClass("active");a(".nivo-controlNav a:eq("+e.currentSlide+")",d).addClass("active")}if(e.currentImage.attr("title")!=""){a(".nivo-caption",d).css("display")=="block"?a(".nivo-caption p",d).fadeOut(b.animSpeed,function(){a(this).html(e.currentImage.attr("title"));a(this).fadeIn(b.animSpeed)}):a(".nivo-caption p",d).html(e.currentImage.attr("title"));
a(".nivo-caption",d).fadeIn(b.animSpeed)}else a(".nivo-caption",d).fadeOut(b.animSpeed);var f=0;a(".nivo-slice",d).each(function(){var h=Math.round(d.width()/b.slices);a(this).css({height:"0px",opacity:"0",background:"url("+e.currentImage.attr("src")+") no-repeat -"+(h+f*h-h)+"px 0%"});f++});if(b.effect=="random"){c=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade");e.randAnim=c[Math.floor(Math.random()*(c.length+1))];if(e.randAnim==
undefined)e.randAnim="fade"}if(b.effect.indexOf(",")!=-1){c=b.effect.split(",");e.randAnim=a.trim(c[Math.floor(Math.random()*c.length)])}e.running=true;if(b.effect=="sliceDown"||b.effect=="sliceDownRight"||e.randAnim=="sliceDownRight"||b.effect=="sliceDownLeft"||e.randAnim=="sliceDownLeft"){var i=0;f=0;c=a(".nivo-slice",d);if(b.effect=="sliceDownLeft"||e.randAnim=="sliceDownLeft")c=a(".nivo-slice",d).reverse();c.each(function(){var h=a(this);h.css("top","0px");f==b.slices-1?setTimeout(function(){h.animate({height:"100%",
opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+i):setTimeout(function(){h.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+i);i+=50;f++})}else if(b.effect=="sliceUp"||b.effect=="sliceUpRight"||e.randAnim=="sliceUpRight"||b.effect=="sliceUpLeft"||e.randAnim=="sliceUpLeft"){f=i=0;c=a(".nivo-slice",d);if(b.effect=="sliceUpLeft"||e.randAnim=="sliceUpLeft")c=a(".nivo-slice",d).reverse();c.each(function(){var h=a(this);h.css("bottom","0px");f==b.slices-1?setTimeout(function(){h.animate({height:"100%",
opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+i):setTimeout(function(){h.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+i);i+=50;f++})}else if(b.effect=="sliceUpDown"||b.effect=="sliceUpDownRight"||e.randAnim=="sliceUpDown"||b.effect=="sliceUpDownLeft"||e.randAnim=="sliceUpDownLeft"){var k=f=i=0;c=a(".nivo-slice",d);if(b.effect=="sliceUpDownLeft"||e.randAnim=="sliceUpDownLeft")c=a(".nivo-slice",d).reverse();c.each(function(){var h=a(this);if(f==0){h.css("top",
"0px");f++}else{h.css("bottom","0px");f=0}k==b.slices-1?setTimeout(function(){h.animate({height:"100%",opacity:"1.0"},b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+i):setTimeout(function(){h.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+i);i+=50;k++})}else if(b.effect=="fold"||e.randAnim=="fold"){f=i=0;a(".nivo-slice",d).each(function(){var h=a(this),m=h.width();h.css({top:"0px",height:"100%",width:"0px"});f==b.slices-1?setTimeout(function(){h.animate({width:m,opacity:"1.0"},
b.animSpeed,"",function(){d.trigger("nivo:animFinished")})},100+i):setTimeout(function(){h.animate({width:m,opacity:"1.0"},b.animSpeed)},100+i);i+=50;f++})}else if(b.effect=="fade"||e.randAnim=="fade"){f=0;a(".nivo-slice",d).each(function(){a(this).css("height","100%");f==b.slices-1?a(this).animate({opacity:"1.0"},b.animSpeed*2,"",function(){d.trigger("nivo:animFinished")}):a(this).animate({opacity:"1.0"},b.animSpeed*2);f++})}}var g=a.extend({},a.fn.nivoSlider.defaults,n);return this.each(function(){var d=
{currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false},c=a(this);c.data("nivo:vars",d);c.css("position","relative");c.width("1px");c.height("1px");c.addClass("nivoSlider");var b=c.children();b.each(function(){var k=a(this);if(!k.is("img")){k.is("a")&&k.addClass("nivo-imageLink");k=k.find("img:first")}var h=k.width();if(h==0)h=k.attr("width");var m=k.height();if(m==0)m=k.attr("height");h>c.width()&&c.width(h);m>c.height()&&c.height(m);k.css("display","none");
d.totalSlides++});if(g.startSlide>0){if(g.startSlide>=d.totalSlides)g.startSlide=d.totalSlides-1;d.currentSlide=g.startSlide}d.currentImage=a(b[d.currentSlide]).is("img")?a(b[d.currentSlide]):a(b[d.currentSlide]).find("img:first");a(b[d.currentSlide]).is("a")&&a(b[d.currentSlide]).css("display","block");c.css("background","url("+d.currentImage.attr("src")+") no-repeat");for(var j=0;j<g.slices;j++){var e=Math.round(c.width()/g.slices);j==g.slices-1?c.append(a('<div class="nivo-slice"></div>').css({left:e*
j+"px",width:c.width()-e*j+"px"})):c.append(a('<div class="nivo-slice"></div>').css({left:e*j+"px",width:e+"px"}))}c.append(a('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:g.captionOpacity}));if(d.currentImage.attr("title")!=""){a(".nivo-caption p",c).html(d.currentImage.attr("title"));a(".nivo-caption",c).fadeIn(g.animSpeed)}var f=0;g.manualAdvance||(f=setInterval(function(){l(c,b,g,false)},g.pauseTime));if(g.directionNav){c.append('<div class="nivo-directionNav"><a class="nivo-prevNav">Prev</a><a class="nivo-nextNav">Next</a></div>');
if(g.directionNavHide){a(".nivo-directionNav",c).hide();c.hover(function(){a(".nivo-directionNav",c).show()},function(){a(".nivo-directionNav",c).hide()})}a("a.nivo-prevNav",c).live("click",function(){if(d.running)return false;clearInterval(f);f="";d.currentSlide-=2;l(c,b,g,"prev")});a("a.nivo-nextNav",c).live("click",function(){if(d.running)return false;clearInterval(f);f="";l(c,b,g,"next")})}if(g.controlNav){e=a('<div class="nivo-controlNav"></div>');c.append(e);for(j=0;j<b.length;j++)if(g.controlNavThumbs){var i=
b.eq(j);i.is("img")||(i=i.find("img:first"));e.append('<a class="nivo-control" rel="'+j+'"><img src="'+i.attr("src").replace(g.controlNavThumbsSearch,g.controlNavThumbsReplace)+'"></a>')}else e.append('<a class="nivo-control" rel="'+j+'">'+j+"</a>");a(".nivo-controlNav a:eq("+d.currentSlide+")",c).addClass("active");a(".nivo-controlNav a",c).live("click",function(){if(d.running)return false;if(a(this).hasClass("active"))return false;clearInterval(f);f="";c.css("background","url("+d.currentImage.attr("src")+
") no-repeat");d.currentSlide=a(this).attr("rel")-1;l(c,b,g,"control")})}g.keyboardNav&&a(window).keypress(function(k){if(k.keyCode=="37"){if(d.running)return false;clearInterval(f);f="";d.currentSlide-=2;l(c,b,g,"prev")}if(k.keyCode=="39"){if(d.running)return false;clearInterval(f);f="";l(c,b,g,"next")}});g.pauseOnHover&&c.hover(function(){d.paused=true;clearInterval(f);f=""},function(){d.paused=false;if(f==""&&!g.manualAdvance)f=setInterval(function(){l(c,b,g,false)},g.pauseTime)});c.bind("nivo:animFinished",
function(){d.running=false;a(b).each(function(){a(this).is("a")&&a(this).css("display","none")});a(b[d.currentSlide]).is("a")&&a(b[d.currentSlide]).css("display","block");if(f==""&&!d.paused&&!g.manualAdvance)f=setInterval(function(){l(c,b,g,false)},g.pauseTime);g.afterChange.call(this)})})};a.fn.nivoSlider.defaults={effect:"random",slices:15,animSpeed:500,pauseTime:3E3,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",
keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){}};a.fn.reverse=[].reverse})(jQuery);
